<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Mes Cours</title>
    
    <!-- Ionicons -->
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="{{ asset('css/style.css') }}">
    <link rel="stylesheet" href="{{ asset('css/listCourse.css') }}">

    <!-- JS -->
    <script src="{{ asset('js/notification.js') }}"></script>

    <!-- Script inline -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const courseContainer = document.querySelector('.cours');
            const paginationContainer = document.querySelector('.pagination');
            let itemsPerPage = 6;
            let currentPage = 1;
            let courses = [];

            function generateCourses(numberOfCourses) {
                for (let i = 0; i < numberOfCourses; i++) {
                    const courseElement = document.createElement('div');
                    courseElement.classList.add('case-cours');
                    courseElement.innerHTML = `
                        <a href="{{ path('course') }}">
                            <div class="course-image">
                                <img src="{{ asset('images/image_logo.png') }}" alt="Course Image">
                            </div>
                            <div class="course-title">
                                <p>Titre du cours</p>
                            </div>
                        </a>
                    `;
                    courses.push(courseElement);
                }
            }

            function displayCourses(page, itemsPerPage) {
                courseContainer.innerHTML = '';
                const start = (page - 1) * itemsPerPage;
                const end = start + itemsPerPage;
                courses.slice(start, end).forEach(course => courseContainer.appendChild(course));
            }

            function updatePagination() {
                paginationContainer.innerHTML = '';
                const totalPages = Math.ceil(courses.length / itemsPerPage);

                const prevButton = document.createElement('button');
                prevButton.classList.add('btn-pagination');
                prevButton.innerHTML = '<ion-icon name="caret-back-outline"></ion-icon>';
                prevButton.addEventListener('click', () => {
                    if (currentPage > 1) {
                        currentPage--;
                        displayCourses(currentPage, itemsPerPage);
                    }
                });
                paginationContainer.appendChild(prevButton);

                const nextButton = document.createElement('button');
                nextButton.classList.add('btn-pagination');
                nextButton.innerHTML = '<ion-icon name="caret-forward-outline"></ion-icon>';
                nextButton.addEventListener('click', () => {
                    if (currentPage < totalPages) {
                        currentPage++;
                        displayCourses(currentPage, itemsPerPage);
                    }
                });
                paginationContainer.appendChild(nextButton);
            }

            generateCourses(15);
            displayCourses(currentPage, itemsPerPage);
            updatePagination();

            document.querySelectorAll('.tri-cours-5 .dropdown-item').forEach(item => {
                item.addEventListener('click', (event) => {
                    const selectedOption = event.target.textContent;
                    itemsPerPage = selectedOption.toLowerCase() === 'tous' ? courses.length : parseInt(selectedOption);
                    document.querySelector('.tri-cours-5 button').innerHTML = `Nombre de cours : ${selectedOption} <ion-icon name="caret-down-outline"></ion-icon>`;
                    currentPage = 1;
                    displayCourses(currentPage, itemsPerPage);
                    updatePagination();
                });
            });

            document.querySelectorAll('.tri-cours-4 .dropdown-item').forEach(item => {
                item.addEventListener('click', (event) => {
                    const mode = event.target.textContent.toLowerCase();
                    if (mode === 'carte') {
                        courseContainer.classList.add('carte-mode');
                        courseContainer.classList.remove('list-mode');
                    } else if (mode === 'liste') {
                        courseContainer.classList.add('list-mode');
                        courseContainer.classList.remove('carte-mode');
                    }
                    document.querySelector('.tri-cours-4 button').innerHTML = `${event.target.textContent} <ion-icon name="caret-down-outline"></ion-icon>`;
                });
            });
        });
    </script>
</head>

<body>
<header>
    <div class="logo">
        <a href="{{ path('home') }}">
            <img src="{{ asset('images/logo_UTBM_blanc.png') }}" alt="MyMoodle">
        </a>
    </div>
    <div class="menu">
        <ul>
            <li><a href="{{ path('my_courses') }}">Mes cours</a></li>
            <li><a href="#">Recherche de cours</a></li>
        </ul>
    </div>
    <div class="user">
        <ul>
            <li>
                <a href="#">
                    <ion-icon name="notifications-outline"></ion-icon>
                    <span class="notification-count">3</span>
                </a>
            </li>
            <li><a href="{{ path('profile') }}"><ion-icon name="person-circle-outline"></ion-icon></a></li>
        </ul>
    </div>
</header>

<div class="content">
    <div class="container">
        <h1>Mes cours</h1>
        <div class="liste-cours">
            <h2>Vue d'ensemble des cours</h2>
            <div class="ligne-gris"></div>
            <div class="tri-course">
                <div class="liste-tri-cours">
                    <!-- ... les boutons de tri comme dans ton code ... -->
                </div>
            </div>
            <div class="cours carte-mode">
                <!-- Les cours seront injectÃ©s ici -->
            </div>
            <div class="pagination">
                <!-- Pagination JS -->
            </div>
        </div>
    </div>
</div>

<div id="notificationPanel" class="notification-panel">
    <div class="notification-header">
        <h2>Notifications</h2>
        <span class="close-btn" id="closeNotificationPanel">&times;</span>
    </div>
    <div class="notification-content">
        <div class="notification-item important">
            <p>Notification importante</p>
            <span class="delete-btn">&times;</span>
        </div>
        <div class="notification-item warning">
            <p>Notification d'avertissement</p>
            <span class="delete-btn">&times;</span>
        </div>
        <div class="notification-item info">
            <p>Notification d'information</p>
            <span class="delete-btn">&times;</span>
        </div>
    </div>
</div>
</body>
</html>
